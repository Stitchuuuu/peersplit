import{_ as z}from"./D9lDmfE0.js";import{n as Y,_ as O}from"./DE4JkdZf.js";import{_ as W}from"./BvpYaeG7.js";import{_ as q,a as H,b as ue,c as re}from"./BifDo8Tx.js";import{g as P,k as ie,h as b,o as d,w as l,a,c as $,l as V,t as T,j as e,m as G,r as _,s as K,p as de,q as pe,b as t,d as k,F as J,v as Q,i as x,f as me,x as ve,n as F,y as fe,_ as ce}from"./Cc6rWAc7.js";import{_ as _e,a as ge,b as ye,c as xe,d as ke,e as Ge,f as $e,g as Ce}from"./Lriy-5Vd.js";import"./Bz0dQahS.js";import"./Cz1uVIEK.js";import"./DlAUqK2U.js";import"./uIxbp4OT.js";import"./BZqG9IWk.js";import"./CdOn_Ylr.js";import"./CcMkvVwY.js";const Ve={class:"flex items-center space-y-2"},we={class:"text-2xl font-medium text-primary-700 dark:text-primary-300 flex-grow"},Ue={key:0,class:"flex flex-col items-end"},be={class:"text-xl color-positive"},Ie={key:1,class:"flex flex-col items-end"},Ne={class:"text-xl color-negative"},De={__name:"GroupItem",props:["group"],setup(I){const i=P(()=>ie(I.group));async function f(p){Y(p)}return(p,r)=>{const v=q;return d(),b(v,{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-950",ui:{body:{padding:"py-2"},rounded:"rounded-none",shadow:"shadow-none"},onClick:r[0]||(r[0]=g=>f(I.group.id))},{default:l(()=>[a("div",Ve,[a("div",we,T(I.group.name),1),e(i)>0?(d(),$("div",Ue,[r[1]||(r[1]=a("span",{class:"text-xs"},"You are owed",-1)),a("span",be,T(("useGroups"in p?p.useGroups:e(G))().getGroupCurrency(I.group.id))+T(e(i)),1)])):V("",!0),e(i)<0?(d(),$("div",Ie,[r[2]||(r[2]=a("span",{class:"text-xs"},"You owe",-1)),a("span",Ne,T(("useGroups"in p?p.useGroups:e(G))().getGroupCurrency(I.group.id))+T(-e(i)),1)])):V("",!0)])]),_:1})}}},Ee=Ge(Ce),Te={key:1,class:"flex flex-col gap-2 h-full px-2"},he={class:"h-14 flex justify-between items-center gap-2"},Be={class:"text-center font-medium text-lg"},Se={class:"py-1 space-y-2 overflow-y-scroll"},Re={key:0},je={class:"w-full flex text-center gap-2"},Le={class:"flex-grow"},Pe={class:"flex-grow"},Ae={class:"space-y-1 py-1"},Me={class:"flex justify-between items-center"},Ye={class:"flex gap-2"},Je={__name:"Group",setup(I){const i=_(!1),f=_(!1),p=_(!1),r=_(!1),v=_(!1),g=_({hello:""}),w=_(null),h=_(null),{getGroupByID:N,loading:U,getGroupedTransactionsByGroupID:A}=K(G()),C=G().currentGroup,m=P(()=>N.value(C));de(U,()=>{n()}),pe(()=>{n()});function n(){!U.value&&!m.value&&Y(null)}function y(c){G().addTransaction(C,c),D()}function R(c){G().updateTransaction(C,c),D()}function j(c){w.value=c,c.type==="expense"?i.value=!0:f.value=!0}function D(){i.value=!1,f.value=!1,w.value=null,g.value={hello:""}}function E(c){h.value=c,v.value=!0}function B(){G().deleteTransaction(C,h.value.id),v.value=!1,D()}function L(){v.value=!1,h.value=null}return(c,o)=>{const M=O,s=z,X=W,Z=_e,ee=ge,oe=ye,S=H,ne=xe,te=Ee,le=ke,se=$e,ae=q;return d(),$(J,null,[e(U)?(d(),b(M,{key:0,height:"h-full"})):V("",!0),!e(U)&&e(m)?(d(),$("div",Te,[a("div",he,[t(s,{onClick:o[0]||(o[0]=u=>("navigateToGroup"in c?c.navigateToGroup:e(Y))(null)),icon:"i-heroicons-arrow-left",variant:"ghost",color:"gray",square:""}),a("span",Be,T(e(N)(e(C))?.name),1),a("div",null,[t(s,{icon:"i-heroicons-chart-bar",variant:"ghost",color:"gray",onClick:o[1]||(o[1]=u=>r.value=!0)}),t(s,{onClick:o[2]||(o[2]=u=>p.value=!0),icon:"i-heroicons-cog-6-tooth",variant:"ghost",color:"gray"})])]),a("div",Se,[e(m)&&!e(m).myID?(d(),$("div",Re,[t(X,{variant:"soft",color:"primary",description:"You don't have a member assigned in this group.",actions:[{click(){p.value=!0},variant:"solid",label:"Assign Member"}]},null,8,["actions"])])):V("",!0),t(Z,{groupID:e(C)},null,8,["groupID"]),a("div",je,[a("div",Le,[t(s,{onClick:o[3]||(o[3]=u=>i.value=!0),block:""},{default:l(()=>[...o[14]||(o[14]=[k("Add Expense",-1)])]),_:1})]),a("div",Pe,[t(s,{onClick:o[4]||(o[4]=u=>f.value=!0),block:"",variant:"outline"},{default:l(()=>[...o[15]||(o[15]=[k("Record Payment",-1)])]),_:1})])]),a("div",Ae,[(d(!0),$(J,null,Q(e(A)(e(C)),u=>(d(),b(ee,{onEdit:j,group:u},null,8,["group"]))),256))])])])):V("",!0),t(S,{"prevent-close":"",modelValue:e(f),"onUpdate:modelValue":o[6]||(o[6]=u=>x(f)?f.value=u:null)},{default:l(()=>[t(oe,{modelValue:e(g),"onUpdate:modelValue":o[5]||(o[5]=u=>x(g)?g.value=u:null),expenseItem:e(w),onUpdate:R,onRecord:y,onClose:D,onDelete:E},null,8,["modelValue","expenseItem"])]),_:1},8,["modelValue"]),t(S,{"prevent-close":"",modelValue:e(i),"onUpdate:modelValue":o[7]||(o[7]=u=>x(i)?i.value=u:null)},{default:l(()=>[t(ne,{expenseItem:e(w),onUpdate:R,onAdd:y,onClose:D,onDelete:E},null,8,["expenseItem"])]),_:1},8,["modelValue"]),t(S,{modelValue:e(r),"onUpdate:modelValue":o[9]||(o[9]=u=>x(r)?r.value=u:null)},{default:l(()=>[t(le,null,{default:l(()=>[t(te,{onClose:o[8]||(o[8]=u=>r.value=!1)})]),_:1})]),_:1},8,["modelValue"]),t(S,{modelValue:e(p),"onUpdate:modelValue":o[11]||(o[11]=u=>x(p)?p.value=u:null)},{default:l(()=>[t(se,{onClose:o[10]||(o[10]=u=>p.value=!1)})]),_:1},8,["modelValue"]),t(S,{modelValue:e(v),"onUpdate:modelValue":o[13]||(o[13]=u=>x(v)?v.value=u:null)},{default:l(()=>[t(ae,null,{header:l(()=>[a("div",Me,[o[16]||(o[16]=a("span",{class:"font-medium"},"Delete Expense",-1)),t(s,{onClick:o[12]||(o[12]=u=>v.value=!1),variant:"ghost",color:"gray",icon:"i-heroicons-x-mark"})])]),footer:l(()=>[a("div",Ye,[t(s,{onClick:B,color:"rose",variant:"outline"},{default:l(()=>[...o[17]||(o[17]=[k("Yes, delete",-1)])]),_:1}),t(s,{onClick:L,variant:"ghost"},{default:l(()=>[...o[18]||(o[18]=[k("Cancel",-1)])]),_:1})])]),default:l(()=>[o[19]||(o[19]=a("div",{class:"space-y-2"},"Are you sure you want to delete this expense?",-1))]),_:1})]),_:1},8,["modelValue"])],64)}}},qe={key:0,class:"flex flex-col h-full px-3 pt-5 space-y-4"},Fe={class:"flex w-full gap-1"},ze={key:2},Oe={key:3,class:"space-y-2"},We={class:"flex justify-between items-center"},He={class:"flex gap-2"},Ke={class:"flex justify-between items-center"},Qe={class:"space-y-2"},Xe={class:"flex gap-2"},vo={__name:"groups",setup(I){const i=_(!1),f=_(""),p=_(!1),r=_(!1),v=_(""),g=_(""),w=P(()=>{try{return new URL(v.value).pathname}catch{return null}}),h=P(()=>!w.value||!w.value.startsWith("/app/groups/join/")),{loading:N,groupsList:U}=K(G());async function A(){p.value=!0,await fe(f.value,g.value),p.value=!1,i.value=!1,f.value="",g.value=""}async function C(){F(w.value),v.value="",r.value=!1}return(m,n)=>{const y=z,R=O,j=W,D=De,E=re,B=ue,L=q,c=H,o=Je,M=ce;return("useRoute"in m?m.useRoute:e(me))().name==="app-groups"&&!("useGroups"in m?m.useGroups:e(G))().currentGroup?(d(),$("div",qe,[a("div",Fe,[t(y,{class:"flex-grow",variant:"solid",icon:"i-heroicons-plus",size:"lg",onClick:n[0]||(n[0]=s=>i.value=!0)},{default:l(()=>[...n[11]||(n[11]=[k("Create Group",-1)])]),_:1}),t(y,{class:"flex-grow",variant:"outline",icon:"i-heroicons-arrow-right-circle",size:"lg",onClick:n[1]||(n[1]=s=>r.value=!0)},{default:l(()=>[...n[12]||(n[12]=[k("Join Group",-1)])]),_:1})]),e(N)?(d(),b(R,{key:0,height:"flex-grow"})):V("",!0),!e(N)&&!("useName"in m?m.useName:e(ve))().value?(d(),b(j,{key:1,color:"red",icon:"i-heroicons-exclamation-triangle",variant:"subtle",title:"Name Needed!",description:"It looks like you haven't set a name yet. Please update your name in settings.",actions:[{click(){("navigateTo"in m?m.navigateTo:e(F))("/app/settings")},variant:"solid",color:"red",label:"Go to Settings"}]},null,8,["actions"])):V("",!0),!e(N)&&e(U)?.length===0?(d(),$("div",ze,[t(j,{icon:"i-heroicons-information-circle",title:"No groups",description:"You are not part of any groups.",color:"primary",variant:"outline"})])):V("",!0),!e(N)&&e(U).length>0?(d(),$("div",Oe,[(d(!0),$(J,null,Q(e(U),s=>(d(),b(D,{key:s.id,group:s},null,8,["group"]))),128))])):V("",!0),t(c,{modelValue:e(r),"onUpdate:modelValue":n[5]||(n[5]=s=>x(r)?r.value=s:null)},{default:l(()=>[t(L,null,{header:l(()=>[a("div",We,[n[13]||(n[13]=a("span",{class:"font-medium"},"Join Group",-1)),t(y,{onClick:n[2]||(n[2]=s=>r.value=!1),variant:"ghost",color:"gray",icon:"i-heroicons-x-mark"})])]),footer:l(()=>[a("div",He,[t(y,{disabled:e(h),onClick:C,variant:"outline"},{default:l(()=>[...n[14]||(n[14]=[k("Join",-1)])]),_:1},8,["disabled"]),t(y,{onClick:n[4]||(n[4]=s=>r.value=!1),variant:"link",color:"white"},{default:l(()=>[...n[15]||(n[15]=[k("Cancel",-1)])]),_:1})])]),default:l(()=>[t(B,{label:"Invite Link"},{default:l(()=>[t(E,{placeholder:"Paste the group invite link here",modelValue:e(v),"onUpdate:modelValue":n[3]||(n[3]=s=>x(v)?v.value=s:null)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(c,{modelValue:e(i),"onUpdate:modelValue":n[10]||(n[10]=s=>x(i)?i.value=s:null)},{default:l(()=>[t(L,null,{header:l(()=>[a("div",Ke,[n[16]||(n[16]=a("span",{class:"font-medium"},"Create Group",-1)),t(y,{onClick:n[6]||(n[6]=s=>i.value=!1),variant:"ghost",color:"gray",icon:"i-heroicons-x-mark"})])]),footer:l(()=>[a("div",Xe,[t(y,{loading:e(p),onClick:A,variant:"outline"},{default:l(()=>[...n[17]||(n[17]=[k("Create",-1)])]),_:1},8,["loading"]),t(y,{onClick:n[9]||(n[9]=s=>i.value=!1),variant:"link",color:"white"},{default:l(()=>[...n[18]||(n[18]=[k("Cancel",-1)])]),_:1})])]),default:l(()=>[a("div",Qe,[t(B,{label:"Group Name"},{default:l(()=>[t(E,{placeholder:"New Group",modelValue:e(f),"onUpdate:modelValue":n[7]||(n[7]=s=>x(f)?f.value=s:null)},null,8,["modelValue"])]),_:1}),t(B,{label:"Currency Symbol"},{default:l(()=>[t(E,{placeholder:"ex: $ or â‚¹",modelValue:e(g),"onUpdate:modelValue":n[8]||(n[8]=s=>x(g)?g.value=s:null)},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])):("useGroups"in m?m.useGroups:e(G))().currentGroup?(d(),b(o,{key:1})):(d(),b(M,{key:2}))}}};export{vo as default};
